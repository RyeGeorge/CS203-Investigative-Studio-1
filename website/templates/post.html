{% extends "base.html" %}  {% block title %}Post{% endblock %}

{% block content %}

<ul class="list-group list-group-flush" id="post">
    <li class="list-group-item">
      <div class="row">
        <div class="col-md-9">
          <h5>{{ post.title }}</h5>
          <small>  - written by {{ post.user_name }}</small>
        </div>
        <div class="col-md-3">
          <small>{{ post.created }}</small>
        </div>
      </div>
    </li>
    <li class="list-group-item">
      {{ post.content }}
    </li>
    <li class="list-group-item">
      <h6 align="center">Comments</h6>
        <ul class="list-group list-group-flush" id="comments">
          {% for comment in post.comments %}
            <div class="row">
              <div class="col-md-4"></div>
              <li class="col-md-5">
                <small>{{ comment.user_name }}: {{ comment.content }}</small>
              </li>
            </div>
          {% endfor %}
        </ul>
    </li>

    <div align="center">
      <button id="toggleButton" class="btn btn-secondary toggleButton">Comment</button>
      <div id="textAreaContainer" style="display: none;">
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
              <form method="POST" action="{{ url_for('views.create_comment', post_id=post.id) }}">
                <textarea name="comment" id="comment" rows="3" class="form-control textAreaContainer"></textarea>
                <button type="submit" name="submit_button" value="comment_btn" class="btn-sm">Submit</button>
              </form>
            </div>
        </div>
      </div>
    </div>
    <br />
  </ul>

  <script>
    // Function to toggle the textarea for each button
    document.addEventListener("DOMContentLoaded", function() {
      const toggleButtons = document.querySelectorAll(".toggleButton");
      toggleButtons.forEach(function(button) {
        button.addEventListener("click", function() {
          const textArea = button.nextElementSibling;
          textArea.style.display = (textArea.style.display === "none") ? "block" : "none";
        });
      });
    });
  </script>


{% endblock %}
